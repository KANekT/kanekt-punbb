<?xml version="1.0" encoding="utf-8"?>
<!--
/*
 * manifest file for team
 *
 * @copyright Copyright (C) 2009 KANekT @ http://blog.teamrip.ru
 * @license http://www.gnu.org/licenses/gpl.html GPL version 2 or higher
 * @package team
*/
-->
<extension engine="1.0">
	<id>team</id>
	<title>team</title>
	<version>0.3.0</version>
	<description>Replace AOL to Team</description>
	<author>KANekT</author>
	<minversion>1.3</minversion>
	<maxtestedon>1.3.4</maxtestedon>

	<hooks>
		<hook id="pf_view_details_pre_header_load,pf_change_details_about_pre_header_load">
			<![CDATA[
		if ($user['aim'] !='')
					$forum_page['user_contact']['aim'] = '<li><span>'.$lang_team['Team'].'<b class="fn">'.$user['aim'].'</b></span></li>';
			]]>
		</hook>
		<hook id="pf_change_details_identity_pre_aim">
			<![CDATA[
				$lang_profile['AOL IM'] = $lang_team['Team'];
			]]>
		</hook>
		<hook id="vt_row_pre_display">
			<![CDATA[
				if ($cur_post['aim'] != '')
				{
					$forum_page['author_info']['team'] =  '<li><span>'.$lang_team['Team'].'<b class="fn">'.$cur_post['aim'].'</b></span></li>';
				}	
			]]>
		</hook>
		<hook id="vt_qr_get_posts"><![CDATA[
				$query['SELECT'] .= ', u.aim';
			]]>
		</hook>
		<hook id="vt_start, pf_start, ul_start">
			<![CDATA[
				if (file_exists($ext_info['path'].'/lang/'.$forum_user['language'].'.php'))
					require $ext_info['path'].'/lang/'.$forum_user['language'].'.php';
				else
					require $ext_info['path'].'/lang/English.php';
			]]>
		</hook>
		<hook id="ul_qr_get_users"><![CDATA[
				$query['SELECT'] .= ', u.aim as Team';
			]]>
		</hook>
		<hook id="ul_results_row_pre_data_output">
			<![CDATA[
				$forum_page['table_row']['team'] = '<td class="tc'.count($forum_page['table_row']).'">'.$user_data['Team'].'</td>';
			]]>
		</hook>
		<hook id="ul_qr_get_user_count">
			<![CDATA[
				if(isset($_GET['sort_by']))
				{
					if($_GET['sort_by'] == 'Team')
						$forum_page['sort_by'] = 'Team';
				}
			]]>
		</hook>
		<hook id="ul_results_pre_header_output">
			<![CDATA[
					$forum_page['table_header']['team'] = '<th class="tc'.count($forum_page['table_header']).'" scope="col">'.$lang_team['Teams'].'</th>';

			]]>
		</hook>
		<hook id="ul_new_sort_by_option"><![CDATA[
		?>
						<option value="Team"<?php if ($forum_page['sort_by'] == 'Team') echo ' selected="selected"' ?>><?php echo $lang_team['TeamList'] ?></option>
						<?php
			]]>
		</hook>
		</hooks>

</extension>
